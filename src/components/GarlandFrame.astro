---
const topLeaves = Array.from({ length: 40 }, (_, i) => ({
  x: 1.8 + i * 2.45,
  rot: i % 2 === 0 ? 36 : -42,
  scale: 0.98 + (i % 5) * 0.04
}));

const bottomLeaves = Array.from({ length: 38 }, (_, i) => ({
  x: 2.1 + i * 2.5,
  rot: i % 2 === 0 ? -32 : 38,
  scale: 0.96 + (i % 4) * 0.045
}));

const sideLeaves = Array.from({ length: 24 }, (_, i) => ({
  y: 2.5 + i * 4.1,
  leftRot: i % 2 === 0 ? 44 : 18,
  rightRot: i % 2 === 0 ? -44 : -18,
  scale: 0.96 + (i % 4) * 0.04
}));

const vineBranches = Array.from({ length: 18 }, (_, i) => ({
  y: 4 + i * 5.1,
  len: 16 + (i % 4) * 6,
  leftRot: i % 2 === 0 ? 32 : -24,
  rightRot: i % 2 === 0 ? -32 : 24
}));

const vineTendrils = Array.from({ length: 10 }, (_, i) => ({
  y: 6 + i * 9.4,
  len: 20 + (i % 3) * 10,
  leftRot: i % 2 === 0 ? -18 : 14,
  rightRot: i % 2 === 0 ? 18 : -14
}));

---

<div class="garland-real" aria-hidden="true">
  <span class="wire wire-top"></span>
  <span class="wire wire-bottom"></span>
  <span class="wire wire-left"></span>
  <span class="wire wire-right"></span>

  <div class="leaf-track leaf-track-top">
    {topLeaves.map((leaf) => (
      <span class="leaf leaf-top" style={`--x:${leaf.x}%;--rot:${leaf.rot}deg;--s:${leaf.scale};`}></span>
    ))}
  </div>

  <div class="leaf-track leaf-track-bottom">
    {bottomLeaves.map((leaf) => (
      <span class="leaf leaf-bottom" style={`--x:${leaf.x}%;--rot:${leaf.rot}deg;--s:${leaf.scale};`}></span>
    ))}
  </div>

  <div class="leaf-track leaf-track-left">
    {sideLeaves.map((leaf) => (
      <span class="leaf leaf-left" style={`--y:${leaf.y}%;--rot:${leaf.leftRot}deg;--s:${leaf.scale};`}></span>
    ))}
  </div>

  <div class="leaf-track leaf-track-right">
    {sideLeaves.map((leaf) => (
      <span class="leaf leaf-right" style={`--y:${leaf.y}%;--rot:${leaf.rightRot}deg;--s:${leaf.scale};`}></span>
    ))}
  </div>

  <div class="vine-lane vine-lane-left">
    <span class="vine-main vine-main-left"></span>
    {vineBranches.map((branch) => (
      <span
        class="vine-branch vine-branch-left"
        style={`--y:${branch.y}%;--len:${branch.len}px;--rot:${branch.leftRot}deg;`}
      ></span>
    ))}
    {vineTendrils.map((tendril) => (
      <span
        class="vine-tendril vine-tendril-left"
        style={`--y:${tendril.y}%;--len:${tendril.len}px;--rot:${tendril.leftRot}deg;`}
      ></span>
    ))}
  </div>

  <div class="vine-lane vine-lane-right">
    <span class="vine-main vine-main-right"></span>
    {vineBranches.map((branch) => (
      <span
        class="vine-branch vine-branch-right"
        style={`--y:${branch.y}%;--len:${branch.len}px;--rot:${branch.rightRot}deg;`}
      ></span>
    ))}
    {vineTendrils.map((tendril) => (
      <span
        class="vine-tendril vine-tendril-right"
        style={`--y:${tendril.y}%;--len:${tendril.len}px;--rot:${tendril.rightRot}deg;`}
      ></span>
    ))}
  </div>

</div>

<style>
  .garland-real {
    --garland-comp: color-mix(in oklab, var(--cursor) 72%, #6d3511 28%);
    --garland-comp-deep: color-mix(in oklab, var(--garland-comp) 55%, #130907 45%);
    --garland-comp-light: color-mix(in oklab, var(--garland-comp) 64%, #ffddb7 36%);
    --garland-highlight: color-mix(in oklab, var(--accent) 16%, var(--garland-comp-light) 84%);
    --garland-wire: color-mix(in oklab, var(--garland-comp) 52%, #74604c 48%);
    position: fixed;
    inset: 4px;
    z-index: 0;
    pointer-events: none;
    opacity: 0.58;
    filter: saturate(0.78) brightness(0.84);
  }

  .garland-real::before {
    content: '';
    position: absolute;
    inset: 0;
    pointer-events: none;
    background:
      radial-gradient(70% 28% at 50% 0%, color-mix(in oklab, var(--garland-highlight) 22%, transparent), transparent 70%),
      radial-gradient(70% 34% at 50% 100%, color-mix(in oklab, var(--garland-comp) 14%, transparent), transparent 75%);
    opacity: 0.42;
  }

  .wire {
    position: absolute;
    display: block;
    border-color: color-mix(in oklab, var(--garland-wire) 46%, transparent);
  }

  .wire-top,
  .wire-bottom {
    left: 0.8%;
    right: 0.8%;
    border-top: 3px solid color-mix(in oklab, var(--garland-wire) 56%, transparent);
    border-radius: 999px;
  }

  .wire-top {
    top: 8px;
  }

  .wire-bottom {
    bottom: -2px;
  }

  .wire-left,
  .wire-right {
    top: 18px;
    bottom: 18px;
    width: 0;
  }

  .wire-left {
    left: 3px;
    border-left: 3px solid color-mix(in oklab, var(--garland-wire) 52%, transparent);
  }

  .wire-right {
    right: 3px;
    border-right: 3px solid color-mix(in oklab, var(--garland-wire) 52%, transparent);
  }

  .leaf-track {
    position: absolute;
    z-index: 2;
  }

  .leaf-track-top,
  .leaf-track-bottom {
    opacity: 0.46;
  }

  .leaf-track-top {
    top: 2px;
    left: 0.8%;
    right: 0.8%;
    height: 64px;
  }

  .leaf-track-bottom {
    bottom: -22px;
    left: 0.8%;
    right: 0.8%;
    height: 52px;
  }

  .leaf-track-left,
  .leaf-track-right {
    top: 24px;
    bottom: 24px;
    width: 40px;
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 9%, black 84%, transparent 100%);
    mask-image: linear-gradient(to bottom, transparent 0%, black 9%, black 84%, transparent 100%);
  }

  .leaf-track-left {
    left: -14px;
  }

  .leaf-track-right {
    right: -14px;
  }

  .leaf {
    position: absolute;
    width: 29px;
    height: 44px;
    border-radius: 70% 0 70% 0 / 80% 0 80% 0;
    background:
      linear-gradient(
        148deg,
        color-mix(in oklab, var(--garland-highlight) 82%, white 18%),
        color-mix(in oklab, var(--garland-comp) 88%, #4e2915 12%) 62%,
        color-mix(in oklab, var(--garland-comp-deep) 90%, black 10%)
      );
    box-shadow:
      inset 0 0 0 1px color-mix(in oklab, var(--garland-comp-light) 26%, transparent),
      0 3px 9px rgba(0, 0, 0, 0.38);
    transform-origin: center;
  }

  .leaf::after {
    content: '';
    position: absolute;
    left: 46%;
    top: 3px;
    bottom: 3px;
    width: 2px;
    background: color-mix(in oklab, var(--garland-comp-light) 34%, transparent);
    transform: rotate(8deg);
  }

  .leaf::before {
    content: '';
    position: absolute;
    inset: 2px 1px 10px 6px;
    border-radius: 50% 0 42% 0 / 58% 0 52% 0;
    background: linear-gradient(
      150deg,
      color-mix(in oklab, var(--garland-highlight) 22%, transparent),
      transparent 68%
    );
    opacity: 0.72;
  }

  .leaf-top {
    left: var(--x);
    top: 6px;
    transform: translateX(-50%) rotate(var(--rot)) scale(var(--s));
  }

  .leaf-bottom {
    left: var(--x);
    bottom: -8px;
    transform: translateX(-50%) rotate(var(--rot)) scale(var(--s));
  }

  .leaf-left {
    top: var(--y);
    left: 0;
    transform: rotate(var(--rot)) scale(var(--s));
  }

  .leaf-right {
    top: var(--y);
    right: 0;
    transform: rotate(var(--rot)) scale(var(--s));
  }

  .vine-lane {
    position: absolute;
    top: 22px;
    bottom: 22px;
    width: 56px;
    z-index: 1;
    opacity: 0.8;
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 84%, transparent 100%);
    mask-image: linear-gradient(to bottom, transparent 0%, black 10%, black 84%, transparent 100%);
  }

  .vine-lane-left {
    left: -12px;
    animation: garlandSideSwayLeft 16s ease-in-out infinite;
  }

  .vine-lane-right {
    right: -12px;
    animation: garlandSideSwayRight 17s ease-in-out infinite;
  }

  .vine-main {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 5px;
    border-radius: 999px;
    background:
      linear-gradient(
        180deg,
        color-mix(in oklab, var(--garland-comp) 76%, #5b2f17 24%),
        color-mix(in oklab, var(--garland-comp-deep) 80%, #190c09 20%)
      );
    box-shadow:
      0 0 0 1px color-mix(in oklab, var(--garland-comp-light) 20%, transparent),
      0 5px 16px rgba(0, 0, 0, 0.34);
  }

  .vine-main-left {
    left: 19px;
  }

  .vine-main-right {
    right: 19px;
  }

  .vine-branch {
    position: absolute;
    top: var(--y);
    width: var(--len);
    height: 3px;
    border-radius: 999px;
    background:
      linear-gradient(
        90deg,
        color-mix(in oklab, var(--garland-comp) 82%, #78441f 18%),
        color-mix(in oklab, var(--garland-comp-deep) 80%, #1a0d08 20%)
      );
    box-shadow: 0 0 0 1px color-mix(in oklab, var(--garland-comp-light) 14%, transparent);
  }

  .vine-branch::after {
    content: '';
    position: absolute;
    top: -7px;
    right: -6px;
    width: 13px;
    height: 20px;
    border-radius: 70% 0 70% 0 / 80% 0 80% 0;
    background:
      linear-gradient(
        148deg,
        color-mix(in oklab, var(--garland-comp-light) 82%, #a85f2a 18%),
        color-mix(in oklab, var(--garland-comp) 84%, #2f190f 16%)
      );
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.24);
    transform: rotate(28deg);
  }

  .vine-branch-left {
    left: 21px;
    transform-origin: left center;
    transform: rotate(var(--rot));
  }

  .vine-branch-right {
    right: 21px;
    transform-origin: right center;
    transform: rotate(var(--rot));
  }

  .vine-branch-right::after {
    right: auto;
    left: -6px;
    transform: rotate(-28deg) scaleX(-1);
  }

  .vine-tendril {
    position: absolute;
    top: var(--y);
    width: 16px;
    height: var(--len);
    opacity: 0.62;
  }

  .vine-lane-left .vine-tendril,
  .vine-lane-right .vine-tendril {
    animation: garlandTendrilGlow 9s ease-in-out infinite;
  }

  .vine-tendril-left {
    left: 24px;
    border-left: 2px solid color-mix(in oklab, var(--garland-comp-light) 54%, transparent);
    border-bottom: 2px solid color-mix(in oklab, var(--garland-comp-light) 54%, transparent);
    border-radius: 0 0 0 22px;
    transform: rotate(var(--rot));
  }

  .vine-tendril-right {
    right: 24px;
    border-right: 2px solid color-mix(in oklab, var(--garland-comp-light) 54%, transparent);
    border-bottom: 2px solid color-mix(in oklab, var(--garland-comp-light) 54%, transparent);
    border-radius: 0 0 22px 0;
    transform: rotate(var(--rot));
  }

  @keyframes garlandSideSwayLeft {
    0%,
    100% {
      transform: translate3d(0, 0, 0);
    }
    50% {
      transform: translate3d(-1.2px, 0.8px, 0);
    }
  }

  @keyframes garlandSideSwayRight {
    0%,
    100% {
      transform: translate3d(0, 0, 0);
    }
    50% {
      transform: translate3d(1.2px, 0.8px, 0);
    }
  }

  @keyframes garlandTendrilGlow {
    0%,
    100% {
      opacity: 0.52;
    }
    50% {
      opacity: 0.72;
    }
  }

  @media (max-width: 860px) {
    .garland-real {
      inset: 2px;
      opacity: 0.52;
    }

    .leaf {
      width: 23px;
      height: 35px;
    }

    .vine-lane {
      width: 38px;
      opacity: 0.58;
      animation: none;
    }

    .vine-main-left {
      left: 13px;
      width: 4px;
    }

    .vine-main-right {
      right: 13px;
      width: 4px;
    }

    .vine-branch {
      width: calc(var(--len) - 4px);
    }

    .vine-tendril {
      opacity: 0.5;
      animation: none;
    }

    .leaf-track-left .leaf:nth-child(2n),
    .leaf-track-right .leaf:nth-child(2n),
    .leaf-track-top .leaf:nth-child(2n),
    .leaf-track-bottom .leaf:nth-child(2n),
    .vine-lane .vine-branch:nth-child(2n),
    .vine-lane .vine-tendril:nth-child(2n) {
      display: none;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .vine-lane-left,
    .vine-lane-right,
    .vine-lane-left .vine-tendril,
    .vine-lane-right .vine-tendril {
      animation: none;
    }
  }
</style>
