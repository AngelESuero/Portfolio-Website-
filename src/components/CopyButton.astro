---
interface Props { value: string; label?: string }
const { value, label = 'Copy' } = Astro.props;
---
<button class="copy-btn rounded border border-zinc-400 px-2 py-1 text-xs dark:border-zinc-600" data-value={value} aria-label={`Copy ${value}`}>{label}</button>

<script is:inline>
  document.querySelectorAll('.copy-btn').forEach((el) => {
    el.addEventListener('click', async () => {
      const value = el.getAttribute('data-value') || '';
      await navigator.clipboard.writeText(value);
      const prev = el.textContent;
      el.textContent = 'Copied';
      setTimeout(() => (el.textContent = prev), 1200);
    });
  });
</script>
